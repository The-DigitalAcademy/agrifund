<!-- 
    AUTHOR: Monique
    CREATE DATE: 24 Jul 2023
    UPDATED DATE: 30 Aug 2023 
 -->
<div class="page-body page-background justify-center">
    <!-- <div class="col-md-6 col-sm-12 mobile-hidden">
        <img src="assets/images/background/barn.webp" alt="Avatar">
    </div> -->
    <div class="mobile-header"></div>
    <div class="container form-container">
        <div class="container-header">
            <div class="justify-start">
                <h1 class="normal-font">Edit Record</h1>
            </div>
            <div class="justify-end">
                <button
                    class="btn icon-btn close-btn"
                    (click)="goBackToDetails()">
                    <fa-icon icon="times"></fa-icon>
                </button>
            </div>
        </div>
        <hr />
        <div class="content">
            <form [formGroup]="editRecordForm" (ngSubmit)="saveRecord()">
                <div class="form-input" id="label">
                    <label for="recordName" class="form-label">
                        Record Description
                    </label>
                    <div class="form-text">
                        Give 2-3 words to describe the record. Example: Bought
                        Seeds
                    </div>
                    <input
                        formControlName="recordName"
                        type="text"
                        class="form-control"
                        id="recordName"
                        [value]="record.description" />
                    <div
                        class="form-text text-danger"
                        *ngIf="
                            (editRecordForm.controls['recordName'].touched ||
                                submitted) &&
                            editRecordForm.controls['recordName'].errors?.[
                                'required'
                            ]
                        ">
                        Please give your record a description.
                    </div>
                </div>
                <div class="form-input" id="form-label">
                    <label for="recordType">Type of Record</label>
                    <select
                        formControlName="recordType"
                        class="form-select"
                        id="recordType">
                        <option value="" disabled selected>
                            Select a record type...
                        </option>
                        <option
                            *ngFor="let type of recordType"
                            [value]="record.category">
                            {{ type }}
                        </option>
                    </select>
                    <div
                        class="form-text text-danger"
                        *ngIf="
                            (editRecordForm.controls['recordType'].touched ||
                                submitted) &&
                            editRecordForm.controls['recordType'].errors?.[
                                'required'
                            ]
                        ">
                        Please select a type for your record.
                    </div>
                </div>
                <div class="form-input" id="label">
                    <label for="recordAmount" class="form-label">
                        Amount of Record
                    </label>
                    <div class="input-group">
                        <span class="input-group-text">R</span>
                        <input
                            formControlName="recordAmount"
                            type="text"
                            class="form-control"
                            id="recordAmount" />
                    </div>
                    <div
                        class="form-text text-danger"
                        *ngIf="
                            (editRecordForm.controls['recordAmount'].touched ||
                                submitted) &&
                            editRecordForm.controls['recordAmount'].errors?.[
                                'required'
                            ]
                        ">
                        Please provide an amount for your record.
                    </div>
                </div>
                <div class="form-input" id="label">
                    <label for="recordProof" class="form-label">
                        Proof of Record
                    </label>
                    <div class="form-text">
                        Please upload a receipt or proof of payment.
                    </div>
                    <div class="document-upload">
                        <div class="doc-header justify-start">
                            <label for="recordProof">Upload Document </label>
                            <div class="form-text">PNG, JPG</div>
                        </div>
                        <hr />
                        <div class="actions">
                            <!-- where the file name will be displayed -->
                            <div class="justify-start">
                                <input
                                    class="form-control file-input"
                                    type="file"
                                    id="recordProof"
                                    (change)="this.onFileChange($event)"
                                    #fileUpload />
                                <input
                                    class="form-control file-upload"
                                    type="text"
                                    formControlName="recordProof"
                                    placeholder="{{ fileName }}" />
                            </div>
                            <div>
                                <button
                                    (click)="fileUpload.click()"
                                    class="btn colourful-btn btn-width right-btn">
                                    Choose
                                </button>
                            </div>
                        </div>
                    </div>
                    <div
                        class="form-text text-danger"
                        *ngIf="
                            (editRecordForm.controls['recordProof'].touched ||
                                submitted) &&
                            editRecordForm.controls['recordProof'].errors?.[
                                'required'
                            ]
                        ">
                        Please upload proof of your record.
                    </div>
                </div>

                <div class="actions">
                    <div class="justify-start">
                        <button
                            class="btn colourful-btn btn-width left-btn"
                            type="submit">
                            Save Changes
                        </button>
                    </div>
                    <div class="justify-end">
                        <button
                            class="btn outline-btn btn-width right-btn"
                            (click)="goBackToDetails()">
                            Cancel
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
